# åœ°å€æ˜ å°„è½¬æ¢å·¥å…· (Address Mapper)

ä¸€ä¸ªå°†å±€æ–¹åœ°å€å¿«é€Ÿè½¬æ¢ä¸º Junbo æ ‡å‡†åœ°å€åº“çš„ Next.js åº”ç”¨ç¨‹åºã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“¤ **Excel æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒ .xlsx å’Œ .xls æ ¼å¼ï¼ˆä¸Šä¼ å±€æ–¹åœ°å€æ•°æ®ï¼‰
- ğŸ”„ **è‡ªåŠ¨åœ°å€åŒ¹é…**: ä»¥éªä¼¯åœ°å€åº“ä¸ºä¸»ï¼Œæ™ºèƒ½åŒ¹é…å±€æ–¹åœ°å€
- ğŸ“Š **å®Œæ•´å±•ç¤º**: æ˜¾ç¤ºæ‰€æœ‰éªä¼¯åœ°å€åº“æ¡ç›®ï¼Œå³ä½¿æœªåŒ¹é…åˆ°å±€æ–¹åœ°å€ä¹Ÿä¼šæ˜¾ç¤º
- ğŸ“¥ **ç»“æœå¯¼å‡º**: å°†è½¬æ¢ç»“æœå¯¼å‡ºä¸º Excel æ–‡ä»¶
- ğŸ“ **æ¨¡æ¿ä¸‹è½½**: æä¾›æ ‡å‡†çš„ Excel æ¨¡æ¿æ–‡ä»¶

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 16.0.5 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS V4
- **UI ç»„ä»¶**: shadcn/ui
- **Excel å¤„ç†**: xlsx

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
npm start
```

## ä½¿ç”¨è¯´æ˜

### 1. å‡†å¤‡ Excel æ–‡ä»¶

æ‚¨çš„ Excel æ–‡ä»¶éœ€è¦åŒ…å«ä»¥ä¸‹åˆ—ï¼ˆè¡¨å¤´ï¼‰**ï¼ˆå±€æ–¹åœ°å€æ•°æ®ï¼‰**ï¼š

- `çœä»½åç§°` - å±€æ–¹çœä»½åç§°
- `çœä»½ç¼–ç ` - å±€æ–¹çœä»½ç¼–ç 
- `åœ°å¸‚åç§°` - å±€æ–¹åœ°å¸‚åç§°
- `åœ°å¸‚ç¼–ç ` - å±€æ–¹åœ°å¸‚ç¼–ç 
- `åŒºå¿åç§°` - å±€æ–¹åŒºå¿åç§°
- `åŒºå¿ç¼–ç ` - å±€æ–¹åŒºå¿ç¼–ç 

æ‚¨å¯ä»¥ç‚¹å‡»"ä¸‹è½½æ¨¡æ¿"æŒ‰é’®è·å–æ ‡å‡†æ¨¡æ¿ã€‚

### 2. ä¸Šä¼ æ–‡ä»¶

1. ç‚¹å‡»ä¸Šä¼ åŒºåŸŸæˆ–æ‹–æ‹½æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
2. é€‰æ‹©æ‚¨å‡†å¤‡å¥½çš„ Excel æ–‡ä»¶ï¼ˆåŒ…å«å±€æ–¹åœ°å€æ•°æ®ï¼‰
3. ç‚¹å‡»"å¼€å§‹è½¬æ¢"æŒ‰é’®

### 3. æŸ¥çœ‹ç»“æœ

è½¬æ¢å®Œæˆåï¼Œç³»ç»Ÿä¼šæ˜¾ç¤º**æ‰€æœ‰éªä¼¯åœ°å€åº“æ¡ç›®**çš„åŒ¹é…ç»“æœè¡¨æ ¼ï¼ŒåŒ…å«ï¼š

- **éªä¼¯åœ°å€åº“åœ°å€**ï¼ˆçœä»½ã€åœ°å¸‚ã€åŒºå¿ï¼‰- å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰æ¡ç›®
- **åŒ¹é…åˆ°çš„å±€æ–¹åœ°å€**ï¼ˆçœä»½ã€åœ°å¸‚ã€åŒºå¿ï¼‰- å¦‚æœåŒ¹é…æˆåŠŸåˆ™æ˜¾ç¤ºï¼Œå¦åˆ™ä¸ºç©º
- **åŒ¹é…çŠ¶æ€**ï¼ˆç²¾ç¡®åŒ¹é…ã€æ¨¡ç³ŠåŒ¹é…ã€ä½ç½®ä¿¡åº¦ã€æœªåŒ¹é…ï¼‰

**æ³¨æ„**ï¼šç³»ç»Ÿä¼šæ˜¾ç¤ºæ‰€æœ‰éªä¼¯åœ°å€åº“çš„æ¡ç›®ï¼Œå³ä½¿æ²¡æœ‰åŒ¹é…åˆ°å±€æ–¹åœ°å€ä¹Ÿä¼šæ˜¾ç¤ºï¼ˆå±€æ–¹åœ°å€åˆ—ä¸ºç©ºï¼‰ã€‚

### 4. å¯¼å‡ºç»“æœ

ç‚¹å‡»"å¯¼å‡ºç»“æœ"æŒ‰é’®ï¼Œå°†è½¬æ¢ç»“æœä¿å­˜ä¸º Excel æ–‡ä»¶ã€‚

å¯¼å‡ºçš„æ–‡ä»¶åŒ…å«ä»¥ä¸‹åˆ—ï¼š

- `junbo_province_name` - Junbo çœä»½åç§°
- `oper_province_name` - å±€æ–¹çœä»½åç§°
- `junbo_city_name` - Junbo åœ°å¸‚åç§°
- `oper_city_name` - å±€æ–¹åœ°å¸‚åç§°
- `oper_city_code` - å±€æ–¹åœ°å¸‚ç¼–ç 
- `junbo_district_name` - Junbo åŒºå¿åç§°
- `oper_district_name` - å±€æ–¹åŒºå¿åç§°
- `oper_district_code` - å±€æ–¹åŒºå¿ç¼–ç 
- `match_score` - åŒ¹é…åˆ†æ•°
- `match_method` - åŒ¹é…æ–¹æ³•
- `confidence` - åŒ¹é…ä¿¡å¿ƒ

## åŒ¹é…é€»è¾‘

ç³»ç»Ÿä»¥**éªä¼¯åœ°å€åº“ä¸ºä¸»**ï¼Œå¯¹æ¯ä¸ªéªä¼¯åœ°å€æ¡ç›®å°è¯•åŒ¹é…å±€æ–¹åœ°å€ï¼Œä½¿ç”¨å¤šçº§åŒ¹é…ç­–ç•¥ï¼š

1. **ç¼–ç åŒ¹é…**: ä¼˜å…ˆä½¿ç”¨ç¼–ç è¿›è¡Œç²¾ç¡®åŒ¹é…
2. **åç§°ç²¾ç¡®åŒ¹é…**: ä½¿ç”¨åœ°å€åç§°è¿›è¡Œç²¾ç¡®åŒ¹é…
3. **æ¨¡ç³ŠåŒ¹é…**: å¯¹åç§°è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼ˆä½¿ç”¨ Levenshtein è·ç¦»ç®—æ³•ï¼‰

åŒ¹é…æµç¨‹ï¼š
- éå†æ‰€æœ‰éªä¼¯åœ°å€åº“æ¡ç›®ï¼ˆçœä»½-åŸå¸‚-åŒºå¿ä¸‰çº§ç»„åˆï¼‰
- å¯¹æ¯ä¸ªéªä¼¯åœ°å€ï¼Œåœ¨å±€æ–¹åœ°å€ä¸­æŸ¥æ‰¾æœ€ä½³åŒ¹é…
- å¦‚æœæ‰¾åˆ°åŒ¹é…ï¼Œæ˜¾ç¤ºåŒ¹é…åˆ°çš„å±€æ–¹åœ°å€ï¼›å¦åˆ™å±€æ–¹åœ°å€åˆ—ä¸ºç©º

åŒ¹é…ç½®ä¿¡åº¦ï¼š
- **high (ç²¾ç¡®åŒ¹é…)**: ç¼–ç æˆ–åç§°å®Œå…¨åŒ¹é…ï¼ˆåŒ¹é…åˆ†æ•° â‰¥ 0.9ï¼‰
- **medium (æ¨¡ç³ŠåŒ¹é…)**: åç§°éƒ¨åˆ†åŒ¹é…ï¼ˆåŒ¹é…åˆ†æ•° â‰¥ 0.6ï¼‰
- **low (ä½ç½®ä¿¡åº¦)**: é€šè¿‡æ¨¡ç³ŠåŒ¹é…è·å¾—çš„åŒ¹é…ï¼ˆåŒ¹é…åˆ†æ•° > 0ï¼‰
- **none (æœªåŒ¹é…)**: æ— æ³•æ‰¾åˆ°åŒ¹é…ï¼ˆåŒ¹é…åˆ†æ•° = 0ï¼‰

## é¡¹ç›®ç»“æ„

```
address-mapper/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ export/         # å¯¼å‡º API
â”‚   â”‚   â”œâ”€â”€ template/       # æ¨¡æ¿ä¸‹è½½ API
â”‚   â”‚   â””â”€â”€ upload/         # æ–‡ä»¶ä¸Šä¼  API
â”‚   â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx            # ä¸»é¡µé¢
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ui/                 # shadcn/ui ç»„ä»¶
â”œâ”€â”€ data/
â”‚   â””â”€â”€ junbo-address.json  # Junbo åœ°å€åº“æ•°æ®
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ address-matcher.ts  # åœ°å€åŒ¹é…é€»è¾‘
â”‚   â”œâ”€â”€ excel.ts            # Excel å¤„ç†å·¥å…·
â”‚   â”œâ”€â”€ types.ts            # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils.ts            # å·¥å…·å‡½æ•°
â””â”€â”€ public/                 # é™æ€èµ„æº
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°çš„åœ°å€åº“æ•°æ®

ç¼–è¾‘ `data/junbo-address.json` æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "0000": {
    "çœä»½ç¼–ç ": "çœä»½åç§°",
    ...
  },
  "çœä»½ç¼–ç ": {
    "åœ°å¸‚ç¼–ç ": "åœ°å¸‚åç§°",
    ...
  },
  "åœ°å¸‚ç¼–ç ": {
    "åŒºå¿ç¼–ç ": "åŒºå¿åç§°",
    ...
  }
}
```

### è‡ªå®šä¹‰åŒ¹é…é€»è¾‘

ä¿®æ”¹ `lib/address-matcher.ts` æ–‡ä»¶ä¸­çš„åŒ¹é…å‡½æ•°ã€‚

## ä½œè€…

**sgz**

åˆ›å»ºæ—¥æœŸ: 2025-11-28

## è®¸å¯è¯

MIT License
